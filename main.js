/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => AgentKitPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian6 = require("obsidian");

// src/core/Orchestrator.ts
var import_obsidian = require("obsidian");
var Orchestrator = class {
  constructor(plugin) {
    this.isRunning = false;
    this.agents = [];
    this.plugin = plugin;
  }
  /**
   * ×¢²áÒ»¸öÖÇÄÜÌå
   */
  registerAgent(agent) {
    this.agents.push(agent);
    if (!this.plugin.data.queues[agent.queueName]) {
      this.plugin.data.queues[agent.queueName] = [];
    }
    console.log(`[Orchestrator] \uFFFD\uFFFD\u05E2\uFFFD\uFFFD Agent: ${agent.constructor.name} -> \uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD: ${agent.queueName}`);
  }
  /**
   * Ìí¼ÓÈÎÎñµ½¶ÓÁÐ (Agent ¿ÉÒÔµ÷ÓÃ´Ë·½·¨½øÐÐÈÎÎñÁ÷×ª)
   */
  async addToQueue(queueName, item) {
    if (!this.plugin.data.queues[queueName]) {
      this.plugin.data.queues[queueName] = [];
    }
    this.plugin.data.queues[queueName].push(item);
    await this.plugin.saveData();
  }
  start() {
    if (this.isRunning)
      return;
    this.isRunning = true;
    new import_obsidian.Notice("\uFFFD0\uFFFD4 \uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD");
    this.loop();
  }
  stop() {
    this.isRunning = false;
    new import_obsidian.Notice("\uFFFD0\uFFFD5 \uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\u0363");
  }
  async loop() {
    if (!this.isRunning)
      return;
    let workDone = false;
    for (const agent of this.agents) {
      if (!this.isRunning)
        break;
      const queueName = agent.queueName;
      const queue = this.plugin.data.queues[queueName];
      if (queue && queue.length > 0) {
        const item = queue[0];
        try {
          const success = await agent.process(item);
          if (success) {
            queue.shift();
            await this.plugin.saveData();
            workDone = true;
            break;
          }
        } catch (error) {
          console.error(`[Agent Error] ${agent.constructor.name}:`, error);
          new import_obsidian.Notice(`Agent ${agent.constructor.name} \uFFFD\uFFFD\uFFFD\uFFFD: ${error.message}`);
          this.stop();
          break;
        }
      }
    }
    const delay = workDone ? 100 : 2e3;
    setTimeout(() => this.loop(), delay);
  }
};

// src/core/LLMProvider.ts
var import_obsidian2 = require("obsidian");
var LLMProvider = class {
  constructor(settings) {
    this.settings = settings;
  }
  async chat(prompt) {
    const provider = this.settings.llmProvider;
    try {
      if (provider === "openai") {
        return await this.callOpenAI(prompt);
      } else if (provider === "google") {
        return await this.callGoogle(prompt);
      } else {
        throw new Error(`\u672A\u77E5\u7684\u63D0\u4F9B\u5546: ${provider}`);
      }
    } catch (error) {
      console.error("[LLM Error]", error);
      new import_obsidian2.Notice(`AI \u8C03\u7528\u5931\u8D25: ${error.message}`);
      return "";
    }
  }
  async callOpenAI(prompt) {
    if (!this.settings.openaiApiKey)
      throw new Error("OpenAI API Key \u672A\u914D\u7F6E");
    const url = `${this.settings.openaiBaseUrl.replace(/\/$/, "")}/chat/completions`;
    const response = await (0, import_obsidian2.requestUrl)({
      url,
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        "Authorization": `Bearer ${this.settings.openaiApiKey}`
      },
      body: JSON.stringify({
        model: this.settings.openaiModel,
        messages: [{ role: "user", content: prompt }],
        temperature: 0.7
      })
    });
    if (response.status >= 400) {
      throw new Error(`OpenAI API Error: ${response.status}`);
    }
    return response.json.choices[0].message.content.trim();
  }
  async callGoogle(prompt) {
    if (!this.settings.googleApiKey)
      throw new Error("Google API Key \u672A\u914D\u7F6E");
    const url = `https://generativelanguage.googleapis.com/v1beta/models/${this.settings.googleModel}:generateContent?key=${this.settings.googleApiKey}`;
    const response = await (0, import_obsidian2.requestUrl)({
      url,
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        contents: [{ parts: [{ text: prompt }] }]
      })
    });
    if (response.status >= 400) {
      throw new Error(`Google API Error: ${response.status}`);
    }
    if (response.json.candidates && response.json.candidates.length > 0) {
      return response.json.candidates[0].content.parts[0].text.trim();
    }
    return "";
  }
};

// src/core/BaseAgent.ts
var BaseAgent = class {
  constructor(plugin, llm) {
    this.plugin = plugin;
    this.llm = llm;
  }
  // èŽ·å–è®¾ç½®çš„å¿«æ·æ–¹å¼
  // [FIX] å…³é”®ä¿®æ”¹ï¼šä»Ž this.plugin.data.settings èŽ·å–
  get settings() {
    return this.plugin.data.settings;
  }
  // èŽ·å– App çš„å¿«æ·æ–¹å¼
  get app() {
    return this.plugin.app;
  }
};

// src/agents/GeneratorAgent.ts
var import_obsidian3 = require("obsidian");
var GeneratorAgent = class extends BaseAgent {
  get queueName() {
    return "generation_queue";
  }
  async process(task) {
    console.log(`[Generator] Processing: ${task.concept}`);
    const prompt = this.settings.prompt_generator.replace("{concept}", task.concept);
    const content = await this.llm.chat(prompt);
    if (content) {
      const fileName = `${task.concept}.md`;
      const folderPath = this.settings.output_dir;
      const filePath = (0, import_obsidian3.normalizePath)(`${folderPath}/${fileName}`);
      const fileExists = this.app.vault.getAbstractFileByPath(filePath);
      if (fileExists) {
        console.log(`\u6587\u4EF6\u5DF2\u5B58\u5728\uFF0C\u8DF3\u8FC7\u751F\u6210: ${filePath}`);
      } else {
        await this.app.vault.create(filePath, content);
        console.log(`\u5DF2\u521B\u5EFA\u6587\u4EF6: ${filePath}`);
      }
    }
    console.log(`[Generator] Generated content for ${task.concept}`);
    return true;
  }
};

// src/settings.ts
var import_obsidian4 = require("obsidian");
var OAKSettingTab = class extends import_obsidian4.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "OAK Agent Kit \u8BBE\u7F6E" });
    new import_obsidian4.Setting(containerEl).setName("AI \u6A21\u578B\u63D0\u4F9B\u5546").addDropdown((d) => d.addOption("openai", "OpenAI").addOption("google", "Google").setValue(this.plugin.data.settings.llmProvider).onChange(async (v) => {
      this.plugin.data.settings.llmProvider = v;
      await this.plugin.saveData();
      this.display();
    }));
    if (this.plugin.data.settings.llmProvider === "openai") {
      new import_obsidian4.Setting(containerEl).setName("API Key").addText((t) => t.setValue(this.plugin.data.settings.openaiApiKey).onChange(async (v) => {
        this.plugin.data.settings.openaiApiKey = v;
        await this.plugin.saveData();
      }));
      new import_obsidian4.Setting(containerEl).setName("Base URL").addText((t) => t.setValue(this.plugin.data.settings.openaiBaseUrl).onChange(async (v) => {
        this.plugin.data.settings.openaiBaseUrl = v;
        await this.plugin.saveData();
      }));
      new import_obsidian4.Setting(containerEl).setName("\u6A21\u578B\u540D\u79F0").addText((t) => t.setValue(this.plugin.data.settings.openaiModel).onChange(async (v) => {
        this.plugin.data.settings.openaiModel = v;
        await this.plugin.saveData();
      }));
    }
    if (this.plugin.data.settings.llmProvider === "google") {
      new import_obsidian4.Setting(containerEl).setName("API Key").addText((t) => t.setValue(this.plugin.data.settings.googleApiKey).onChange(async (v) => {
        this.plugin.data.settings.googleApiKey = v;
        await this.plugin.saveData();
      }));
      new import_obsidian4.Setting(containerEl).setName("\u6A21\u578B\u540D\u79F0").addText((t) => t.setValue(this.plugin.data.settings.googleModel).onChange(async (v) => {
        this.plugin.data.settings.googleModel = v;
        await this.plugin.saveData();
      }));
    }
    new import_obsidian4.Setting(containerEl).setName("\u8F93\u51FA\u6587\u4EF6\u5939").addText((t) => t.setValue(this.plugin.data.settings.output_dir).onChange(async (v) => {
      this.plugin.data.settings.output_dir = v;
      await this.plugin.saveData();
    }));
    new import_obsidian4.Setting(containerEl).setName("\u751F\u6210 Prompt \u6A21\u677F").addTextArea((t) => {
      t.setValue(this.plugin.data.settings.prompt_generator).onChange(async (v) => {
        this.plugin.data.settings.prompt_generator = v;
        await this.plugin.saveData();
      });
      t.inputEl.rows = 5;
    });
  }
};

// src/InputModal.ts
var import_obsidian5 = require("obsidian");
var InputModal = class extends import_obsidian5.Modal {
  constructor(app, onSubmit) {
    super(app);
    this.onSubmit = onSubmit;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h2", { text: "\u{1F331} \u64AD\u79CD\u65B0\u6982\u5FF5" });
    let inputElement;
    new import_obsidian5.Setting(contentEl).setName("\u8F93\u5165\u6982\u5FF5\u540D\u79F0").setDesc("\u8F93\u5165\u4F60\u60F3\u751F\u6210\u7684\u77E5\u8BC6\u70B9\uFF0C\u4F8B\u5982\uFF1A'\u7B2C\u4E00\u6027\u539F\u7406'").addText((text) => {
      inputElement = text.inputEl;
      text.onChange((value) => {
        this.result = value;
      });
      text.inputEl.addEventListener("keypress", (e) => {
        if (e.key === "Enter") {
          this.submit();
        }
      });
    });
    new import_obsidian5.Setting(contentEl).addButton((btn) => btn.setButtonText("\u6DFB\u52A0\u5230\u961F\u5217").setCta().onClick(() => {
      this.submit();
    }));
    setTimeout(() => inputElement == null ? void 0 : inputElement.focus(), 0);
  }
  submit() {
    if (this.result && this.result.trim().length > 0) {
      this.close();
      this.onSubmit(this.result.trim());
    } else {
      this.close();
    }
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/main.ts
var DEFAULT_DATA = {
  queues: {
    "generation_queue": []
  },
  settings: {
    llmProvider: "openai",
    openaiApiKey: "",
    openaiBaseUrl: "https://api.openai.com/v1",
    openaiModel: "gpt-3.5-turbo",
    googleApiKey: "",
    googleModel: "gemini-1.5-flash",
    prompt_generator: "\u8BF7\u8BE6\u7EC6\u89E3\u91CA\u6982\u5FF5: {concept}\uFF0C\u5305\u542B\u5B9A\u4E49\u3001\u539F\u7406\u548C\u5E94\u7528\u3002",
    output_dir: "KnowledgeGraph"
  }
};
var AgentKitPlugin = class extends import_obsidian6.Plugin {
  async onload() {
    await this.loadData();
    if (!await this.app.vault.adapter.exists(this.data.settings.output_dir)) {
      await this.app.vault.createFolder(this.data.settings.output_dir);
    }
    this.addSettingTab(new OAKSettingTab(this.app, this));
    this.llm = new LLMProvider(this.data.settings);
    this.orchestrator = new Orchestrator(this);
    this.orchestrator.registerAgent(new GeneratorAgent(this, this.llm));
    this.addCommand({
      id: "add-custom-concept",
      name: "\u6DFB\u52A0\u65B0\u6982\u5FF5\u5230\u751F\u6210\u961F\u5217",
      callback: () => {
        new InputModal(this.app, (concept) => {
          this.orchestrator.addToQueue("generation_queue", { concept });
          new import_obsidian6.Notice(`\u5DF2\u5C06 '${concept}' \u52A0\u5165\u961F\u5217\u3002\u8BB0\u5F97\u542F\u52A8\u5F15\u64CE\u54E6\uFF01`);
        }).open();
      }
    });
    this.addCommand({
      id: "toggle-oak",
      name: "\u542F\u52A8/\u505C\u6B62 OAK \u5F15\u64CE",
      callback: () => {
        this.orchestrator.start();
      }
    });
    this.addRibbonIcon("bot", "OAK Agent Kit", () => {
      new InputModal(this.app, (concept) => {
        this.orchestrator.addToQueue("generation_queue", { concept });
        this.orchestrator.start();
      }).open();
    });
  }
  async loadData() {
    const loaded = await super.loadData();
    this.data = Object.assign({}, DEFAULT_DATA, loaded);
    this.data.settings = Object.assign({}, DEFAULT_DATA.settings, loaded == null ? void 0 : loaded.settings);
  }
  async saveData() {
    await super.saveData(this.data);
    if (this.llm) {
      this.llm = new LLMProvider(this.data.settings);
    }
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL2NvcmUvT3JjaGVzdHJhdG9yLnRzIiwgInNyYy9jb3JlL0xMTVByb3ZpZGVyLnRzIiwgInNyYy9jb3JlL0Jhc2VBZ2VudC50cyIsICJzcmMvYWdlbnRzL0dlbmVyYXRvckFnZW50LnRzIiwgInNyYy9zZXR0aW5ncy50cyIsICJzcmMvSW5wdXRNb2RhbC50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgUGx1Z2luLCBOb3RpY2UgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IFBsdWdpbkRhdGEgfSBmcm9tIFwiLi9jb3JlL3R5cGVzXCI7XG5pbXBvcnQgeyBPcmNoZXN0cmF0b3IgfSBmcm9tIFwiLi9jb3JlL09yY2hlc3RyYXRvclwiO1xuaW1wb3J0IHsgTExNUHJvdmlkZXIgfSBmcm9tIFwiLi9jb3JlL0xMTVByb3ZpZGVyXCI7XG5pbXBvcnQgeyBHZW5lcmF0b3JBZ2VudCB9IGZyb20gXCIuL2FnZW50cy9HZW5lcmF0b3JBZ2VudFwiO1xuaW1wb3J0IHsgT0FLU2V0dGluZ1RhYiB9IGZyb20gXCIuL3NldHRpbmdzXCI7XG5pbXBvcnQgeyBJbnB1dE1vZGFsIH0gZnJvbSBcIi4vSW5wdXRNb2RhbFwiOyBcblxuY29uc3QgREVGQVVMVF9EQVRBOiBQbHVnaW5EYXRhID0ge1xuICAgIHF1ZXVlczoge1xuICAgICAgICBcImdlbmVyYXRpb25fcXVldWVcIjogW11cbiAgICB9LFxuICAgIHNldHRpbmdzOiB7XG4gICAgICAgIGxsbVByb3ZpZGVyOiBcIm9wZW5haVwiLFxuICAgICAgICBvcGVuYWlBcGlLZXk6IFwiXCIsXG4gICAgICAgIG9wZW5haUJhc2VVcmw6IFwiaHR0cHM6Ly9hcGkub3BlbmFpLmNvbS92MVwiLFxuICAgICAgICBvcGVuYWlNb2RlbDogXCJncHQtMy41LXR1cmJvXCIsXG4gICAgICAgIGdvb2dsZUFwaUtleTogXCJcIixcbiAgICAgICAgZ29vZ2xlTW9kZWw6IFwiZ2VtaW5pLTEuNS1mbGFzaFwiLFxuICAgICAgICBwcm9tcHRfZ2VuZXJhdG9yOiBcIlx1OEJGN1x1OEJFNlx1N0VDNlx1ODlFM1x1OTFDQVx1Njk4Mlx1NUZGNToge2NvbmNlcHR9XHVGRjBDXHU1MzA1XHU1NDJCXHU1QjlBXHU0RTQ5XHUzMDAxXHU1MzlGXHU3NDA2XHU1NDhDXHU1RTk0XHU3NTI4XHUzMDAyXCIsXG4gICAgICAgIG91dHB1dF9kaXI6IFwiS25vd2xlZGdlR3JhcGhcIlxuICAgIH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFnZW50S2l0UGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcbiAgICBkYXRhOiBQbHVnaW5EYXRhO1xuICAgIG9yY2hlc3RyYXRvcjogT3JjaGVzdHJhdG9yO1xuICAgIGxsbTogTExNUHJvdmlkZXI7XG5cbiAgICBhc3luYyBvbmxvYWQoKSB7XG4gICAgICAgIGF3YWl0IHRoaXMubG9hZERhdGEoKTtcblxuICAgICAgICAvLyBcdTc4NkVcdTRGRERcdThGOTNcdTUxRkFcdTc2RUVcdTVGNTVcdTVCNThcdTU3MjhcbiAgICAgICAgaWYgKCFhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyh0aGlzLmRhdGEuc2V0dGluZ3Mub3V0cHV0X2RpcikpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZUZvbGRlcih0aGlzLmRhdGEuc2V0dGluZ3Mub3V0cHV0X2Rpcik7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmFkZFNldHRpbmdUYWIobmV3IE9BS1NldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcblxuICAgICAgICB0aGlzLmxsbSA9IG5ldyBMTE1Qcm92aWRlcih0aGlzLmRhdGEuc2V0dGluZ3MpO1xuICAgICAgICB0aGlzLm9yY2hlc3RyYXRvciA9IG5ldyBPcmNoZXN0cmF0b3IodGhpcyk7XG5cbiAgICAgICAgdGhpcy5vcmNoZXN0cmF0b3IucmVnaXN0ZXJBZ2VudChuZXcgR2VuZXJhdG9yQWdlbnQodGhpcyBhcyBhbnksIHRoaXMubGxtKSk7XG5cbiAgICAgICAgLy8gLS0tIFx1NjVCMFx1NTg5RVx1RkYxQVx1NkRGQlx1NTJBMFx1ODFFQVx1NUI5QVx1NEU0OVx1NEVGQlx1NTJBMVx1NzY4NFx1NTQ3RFx1NEVFNCAtLS1cbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiAnYWRkLWN1c3RvbS1jb25jZXB0JyxcbiAgICAgICAgICAgIG5hbWU6ICdcdTZERkJcdTUyQTBcdTY1QjBcdTY5ODJcdTVGRjVcdTUyMzBcdTc1MUZcdTYyMTBcdTk2MUZcdTUyMTcnLFxuICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgICBuZXcgSW5wdXRNb2RhbCh0aGlzLmFwcCwgKGNvbmNlcHQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vcmNoZXN0cmF0b3IuYWRkVG9RdWV1ZShcImdlbmVyYXRpb25fcXVldWVcIiwgeyBjb25jZXB0OiBjb25jZXB0IH0pO1xuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBcdTVERjJcdTVDMDYgJyR7Y29uY2VwdH0nIFx1NTJBMFx1NTE2NVx1OTYxRlx1NTIxN1x1MzAwMlx1OEJCMFx1NUY5N1x1NTQyRlx1NTJBOFx1NUYxNVx1NjRDRVx1NTRFNlx1RkYwMWApO1xuICAgICAgICAgICAgICAgIH0pLm9wZW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gLS0tIFx1NUYxNVx1NjRDRVx1NUYwMFx1NTE3M1x1NTQ3RFx1NEVFNCAtLS1cbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiAndG9nZ2xlLW9haycsXG4gICAgICAgICAgICBuYW1lOiAnXHU1NDJGXHU1MkE4L1x1NTA1Q1x1NkI2MiBPQUsgXHU1RjE1XHU2NENFJyxcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICB0aGlzLm9yY2hlc3RyYXRvci5zdGFydCgpOyBcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyAtLS0gUmliYm9uIFx1NTZGRVx1NjgwNyAoXHU3MEI5XHU1MUZCXHU3NkY0XHU2M0E1XHU4RjkzXHU1MTY1KSAtLS1cbiAgICAgICAgdGhpcy5hZGRSaWJib25JY29uKCdib3QnLCAnT0FLIEFnZW50IEtpdCcsICgpID0+IHtcbiAgICAgICAgICAgIG5ldyBJbnB1dE1vZGFsKHRoaXMuYXBwLCAoY29uY2VwdCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMub3JjaGVzdHJhdG9yLmFkZFRvUXVldWUoXCJnZW5lcmF0aW9uX3F1ZXVlXCIsIHsgY29uY2VwdDogY29uY2VwdCB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLm9yY2hlc3RyYXRvci5zdGFydCgpOyBcbiAgICAgICAgICAgIH0pLm9wZW4oKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgYXN5bmMgbG9hZERhdGEoKSB7XG4gICAgICAgIGNvbnN0IGxvYWRlZCA9IGF3YWl0IHN1cGVyLmxvYWREYXRhKCk7XG4gICAgICAgIHRoaXMuZGF0YSA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfREFUQSwgbG9hZGVkKTtcbiAgICAgICAgdGhpcy5kYXRhLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9EQVRBLnNldHRpbmdzLCBsb2FkZWQ/LnNldHRpbmdzKTtcbiAgICB9XG5cbiAgICBhc3luYyBzYXZlRGF0YSgpIHtcbiAgICAgICAgYXdhaXQgc3VwZXIuc2F2ZURhdGEodGhpcy5kYXRhKTtcbiAgICAgICAgaWYgKHRoaXMubGxtKSB7XG4gICAgICAgICAgICB0aGlzLmxsbSA9IG5ldyBMTE1Qcm92aWRlcih0aGlzLmRhdGEuc2V0dGluZ3MpO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwgImltcG9ydCB7IE5vdGljZSwgUGx1Z2luIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBCYXNlQWdlbnQgfSBmcm9tIFwiLi9CYXNlQWdlbnRcIjtcbmltcG9ydCB7IFBsdWdpbkRhdGEgfSBmcm9tIFwiLi90eXBlc1wiO1xuXG5leHBvcnQgY2xhc3MgT3JjaGVzdHJhdG9yIHtcbiAgICBwcml2YXRlIGlzUnVubmluZyA9IGZhbHNlO1xuICAgIHByaXZhdGUgYWdlbnRzOiBCYXNlQWdlbnQ8YW55PltdID0gW107XG4gICAgLy8gXHVGRkZEXHVGRkZEXHVGRkZEXHVGRkZEIHBsdWdpbiBcdUZGRkRcdUZGRkRcdUZGRkRcdUZGRkRcbiAgICBwcml2YXRlIHBsdWdpbjogUGx1Z2luICYgeyBkYXRhOiBQbHVnaW5EYXRhLCBzYXZlRGF0YTogKCkgPT4gUHJvbWlzZTx2b2lkPiB9O1xuXG4gICAgY29uc3RydWN0b3IocGx1Z2luOiBhbnkpIHtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogXHUwNUUyXHVGRkZEXHVGRkZEXHUwNEJCXHVGRkZEXHVGRkZEXHVGRkZEXHVGRkZEXHVGRkZEXHVGRkZEXHVGRkZEXHVGRkZEXG4gICAgICovXG4gICAgcmVnaXN0ZXJBZ2VudChhZ2VudDogQmFzZUFnZW50PGFueT4pIHtcbiAgICAgICAgdGhpcy5hZ2VudHMucHVzaChhZ2VudCk7XG4gICAgICAgIGlmICghdGhpcy5wbHVnaW4uZGF0YS5xdWV1ZXNbYWdlbnQucXVldWVOYW1lXSkge1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uZGF0YS5xdWV1ZXNbYWdlbnQucXVldWVOYW1lXSA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIGNvbnNvbGUubG9nKGBbT3JjaGVzdHJhdG9yXSBcdUZGRkRcdUZGRkRcdTA1RTJcdUZGRkRcdUZGRkQgQWdlbnQ6ICR7YWdlbnQuY29uc3RydWN0b3IubmFtZX0gLT4gXHVGRkZEXHVGRkZEXHVGRkZEXHVGRkZEXHVGRkZEXHVGRkZEXHVGRkZEXHVGRkZEOiAke2FnZW50LnF1ZXVlTmFtZX1gKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBcdUZGRkRcdUZGRkRcdUZGRkRcdUZGRkRcdUZGRkRcdUZGRkRcdUZGRkRcdUQ5OTdcdURGNzZcdUZGRkRcdUZGRkRcdUZGRkQgKEFnZW50IFx1RkZGRFx1RkZGRFx1RkZGRFx1MDUzNVx1RkZGRFx1RkZGRFx1MDBGNFx1MDJGN1x1RkZGRFx1RkZGRFx1RkZGRFx1RkZGRFx1RkZGRFx1RkZGRFx1RkZGRFx1RkZGRFx1RkZGRFx1RkZGRFx1RkZGRFx1RkZGRFx1RkZGRFx1MDVFQSlcbiAgICAgKi9cbiAgICBhc3luYyBhZGRUb1F1ZXVlKHF1ZXVlTmFtZTogc3RyaW5nLCBpdGVtOiBhbnkpIHtcbiAgICAgICAgaWYgKCF0aGlzLnBsdWdpbi5kYXRhLnF1ZXVlc1txdWV1ZU5hbWVdKSB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5kYXRhLnF1ZXVlc1txdWV1ZU5hbWVdID0gW107XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wbHVnaW4uZGF0YS5xdWV1ZXNbcXVldWVOYW1lXS5wdXNoKGl0ZW0pO1xuICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlRGF0YSgpO1xuICAgICAgICAvLyBcdUZGRkRcdUZGRkRcdTA0NjFcdUZGRkRcdUZGRkRcdUZGRkRcdUZGRkRcdUZGRkRcdUZGRkRcdUZGRkRcdUZGRkRcdTAyQkVcbiAgICAgICAgLy8gbmV3IE5vdGljZShgWyR7cXVldWVOYW1lfV0gKzEgXHVGRkZEXHVGRkZEXHVGRkZEXHVGRkZEYCk7XG4gICAgfVxuXG4gICAgc3RhcnQoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzUnVubmluZykgcmV0dXJuO1xuICAgICAgICB0aGlzLmlzUnVubmluZyA9IHRydWU7XG4gICAgICAgIG5ldyBOb3RpY2UoXCJcdUZGRkQwXHVGRkZENCBcdUZGRkRcdUZGRkRcdUZGRkRcdUZGRkRcdUZGRkRcdUZGRkRcdUZGRkRcdUZGRkRcdUZGRkRcdUZGRkRcIik7XG4gICAgICAgIHRoaXMubG9vcCgpO1xuICAgIH1cblxuICAgIHN0b3AoKSB7XG4gICAgICAgIHRoaXMuaXNSdW5uaW5nID0gZmFsc2U7XG4gICAgICAgIG5ldyBOb3RpY2UoXCJcdUZGRkQwXHVGRkZENSBcdUZGRkRcdUZGRkRcdUZGRkRcdUZGRkRcdUZGRkRcdUZGRkRcdUZGRkRcdUZGRkRcdTAzNjNcIik7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBsb29wKCkge1xuICAgICAgICBpZiAoIXRoaXMuaXNSdW5uaW5nKSByZXR1cm47XG5cbiAgICAgICAgbGV0IHdvcmtEb25lID0gZmFsc2U7XG5cbiAgICAgICAgZm9yIChjb25zdCBhZ2VudCBvZiB0aGlzLmFnZW50cykge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzUnVubmluZykgYnJlYWs7XG5cbiAgICAgICAgICAgIGNvbnN0IHF1ZXVlTmFtZSA9IGFnZW50LnF1ZXVlTmFtZTtcbiAgICAgICAgICAgIGNvbnN0IHF1ZXVlID0gdGhpcy5wbHVnaW4uZGF0YS5xdWV1ZXNbcXVldWVOYW1lXTtcblxuICAgICAgICAgICAgaWYgKHF1ZXVlICYmIHF1ZXVlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpdGVtID0gcXVldWVbMF07IC8vIFBlZWtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAvLyBcdTA1QjRcdUZGRkRcdTA0MzRcdUZGRkRcdUZGRkRcdUZGRkRcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3VjY2VzcyA9IGF3YWl0IGFnZW50LnByb2Nlc3MoaXRlbSk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcXVldWUuc2hpZnQoKTsgLy8gXHVGRkZEXHUwMjc5XHVGRkZEXHVGRkZEXHVGRkZEXHVGRkZEXHUwMUIzXHVGRkZEXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlRGF0YSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgd29ya0RvbmUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHVGRkZEXHVGRkZEXHUwNEJCXHVGRkZEXHVGRkZEXHUwNUJCXHVGRkZEXHVGRkZEXHUwNEJCXHVGRkZEXHVGRkZEXHVGRkZEXHVGRkZEXHVGRkZEXHVEOTRFXHVERjMxXHVGRkZEXHVGRkZEXHUyRkU4XHVGRkZEXHVGRkZEXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhazsgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBbQWdlbnQgRXJyb3JdICR7YWdlbnQuY29uc3RydWN0b3IubmFtZX06YCwgZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBBZ2VudCAke2FnZW50LmNvbnN0cnVjdG9yLm5hbWV9IFx1RkZGRFx1RkZGRFx1RkZGRFx1RkZGRDogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgICAgICAgICAgICAgICAgICAvLyBcdUZGRkRcdURBOTZcdURENzVcdTAxMzdcdUZGRkRcdUZGRkRcdUZGRkRcdTA0NkRcdUZGRkRcdUZGRkRcdUZGRkRcdUZGRkRcdUZGRkRcdTAxQTNcdUZGRkRcdUZGRkRcdUZGRkRcdUZGRkRcdUZGRkRcdUZGRkRcdTAyRkVcdUZGRkRcdUZGRkRcdUZGRkRcdTAzNjNcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdG9wKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFx1RkZGRFx1RkZGRFx1MDMyQ1x1RkZGRFx1RkZGRFx1RkZGRFx1RkZGRFx1RkZGRFx1RkZGRFx1RkZGRFx1RkZGRFx1RkZGRFx1RkZGRFx1RkZGRFx1MDQzQlx1RkZGRFx1RkZGRFx1MDI3RVx1MDM3Rlx1RkZGRFx1RkZGRFx1RkZGRCgxMDBtcylcdUZGRkRcdUZGRkRcdTAwRkJcdUZGRkRcdUZGRkRcdUZGRkRcdTAyN0VcdUZGRkRcdUZGRkRcdUZGRkRcdUZGRkRcdUZGRkQoMjAwMG1zKVxuICAgICAgICBjb25zdCBkZWxheSA9IHdvcmtEb25lID8gMTAwIDogMjAwMDsgXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5sb29wKCksIGRlbGF5KTtcbiAgICB9XG59IiwgIi8vIHNyYy9jb3JlL0xMTVByb3ZpZGVyLnRzXG5pbXBvcnQgeyByZXF1ZXN0VXJsLCBOb3RpY2UgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IE9BS1NldHRpbmdzIH0gZnJvbSBcIi4vdHlwZXNcIjtcblxuZXhwb3J0IGNsYXNzIExMTVByb3ZpZGVyIHtcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIHNldHRpbmdzOiBPQUtTZXR0aW5ncykge31cblxuICAgIGFzeW5jIGNoYXQocHJvbXB0OiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgICBjb25zdCBwcm92aWRlciA9IHRoaXMuc2V0dGluZ3MubGxtUHJvdmlkZXI7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmIChwcm92aWRlciA9PT0gXCJvcGVuYWlcIikge1xuICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmNhbGxPcGVuQUkocHJvbXB0KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocHJvdmlkZXIgPT09IFwiZ29vZ2xlXCIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5jYWxsR29vZ2xlKHByb21wdCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgXHU2NzJBXHU3N0U1XHU3Njg0XHU2M0QwXHU0RjlCXHU1NTQ2OiAke3Byb3ZpZGVyfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIltMTE0gRXJyb3JdXCIsIGVycm9yKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYEFJIFx1OEMwM1x1NzUyOFx1NTkzMVx1OEQyNTogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgICAgICAgICAgcmV0dXJuIFwiXCI7IC8vIFx1OEZENFx1NTZERVx1N0E3QVx1NUI1N1x1N0IyNlx1NEUzMlx1ODg2OFx1NzkzQVx1NTkzMVx1OEQyNVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBjYWxsT3BlbkFJKHByb21wdDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgaWYgKCF0aGlzLnNldHRpbmdzLm9wZW5haUFwaUtleSkgdGhyb3cgbmV3IEVycm9yKFwiT3BlbkFJIEFQSSBLZXkgXHU2NzJBXHU5MTREXHU3RjZFXCIpO1xuXG4gICAgICAgIGNvbnN0IHVybCA9IGAke3RoaXMuc2V0dGluZ3Mub3BlbmFpQmFzZVVybC5yZXBsYWNlKC9cXC8kLywgXCJcIil9L2NoYXQvY29tcGxldGlvbnNgO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0VXJsKHtcbiAgICAgICAgICAgIHVybDogdXJsLFxuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgICAgICAgICBcIkF1dGhvcml6YXRpb25cIjogYEJlYXJlciAke3RoaXMuc2V0dGluZ3Mub3BlbmFpQXBpS2V5fWBcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgbW9kZWw6IHRoaXMuc2V0dGluZ3Mub3BlbmFpTW9kZWwsXG4gICAgICAgICAgICAgICAgbWVzc2FnZXM6IFt7IHJvbGU6IFwidXNlclwiLCBjb250ZW50OiBwcm9tcHQgfV0sXG4gICAgICAgICAgICAgICAgdGVtcGVyYXR1cmU6IDAuN1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA+PSA0MDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgT3BlbkFJIEFQSSBFcnJvcjogJHtyZXNwb25zZS5zdGF0dXN9YCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbi5jaG9pY2VzWzBdLm1lc3NhZ2UuY29udGVudC50cmltKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBjYWxsR29vZ2xlKHByb21wdDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgaWYgKCF0aGlzLnNldHRpbmdzLmdvb2dsZUFwaUtleSkgdGhyb3cgbmV3IEVycm9yKFwiR29vZ2xlIEFQSSBLZXkgXHU2NzJBXHU5MTREXHU3RjZFXCIpO1xuXG4gICAgICAgIGNvbnN0IHVybCA9IGBodHRwczovL2dlbmVyYXRpdmVsYW5ndWFnZS5nb29nbGVhcGlzLmNvbS92MWJldGEvbW9kZWxzLyR7dGhpcy5zZXR0aW5ncy5nb29nbGVNb2RlbH06Z2VuZXJhdGVDb250ZW50P2tleT0ke3RoaXMuc2V0dGluZ3MuZ29vZ2xlQXBpS2V5fWA7XG5cbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0VXJsKHtcbiAgICAgICAgICAgIHVybDogdXJsLFxuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHsgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICBjb250ZW50czogW3sgcGFydHM6IFt7IHRleHQ6IHByb21wdCB9XSB9XVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA+PSA0MDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgR29vZ2xlIEFQSSBFcnJvcjogJHtyZXNwb25zZS5zdGF0dXN9YCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBcdTg5RTNcdTY3OTAgR2VtaW5pIFx1NzY4NFx1NTk0N1x1NjAyQVx1OEZENFx1NTZERVx1N0VEM1x1Njc4NFxuICAgICAgICBpZiAocmVzcG9uc2UuanNvbi5jYW5kaWRhdGVzICYmIHJlc3BvbnNlLmpzb24uY2FuZGlkYXRlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24uY2FuZGlkYXRlc1swXS5jb250ZW50LnBhcnRzWzBdLnRleHQudHJpbSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBcIlwiO1xuICAgIH1cbn0iLCAiaW1wb3J0IHsgTExNUHJvdmlkZXIgfSBmcm9tIFwiLi9MTE1Qcm92aWRlclwiO1xuaW1wb3J0IHsgQXBwIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5cbi8vIFx1OEZEOVx1NjYyRlx1NEUwMFx1NEUyQVx1NEUzQVx1NEU4Nlx1OTA3Rlx1NTE0RFx1NUZBQVx1NzNBRlx1NUYxNVx1NzUyOFx1ODAwQ1x1NUI5QVx1NEU0OVx1NzY4NFx1N0I4MFx1NjYxM1x1NjNBNVx1NTNFM1xuaW50ZXJmYWNlIElQbHVnaW5Db250ZXh0IHtcbiAgICBhcHA6IEFwcDtcbiAgICAvLyBbRklYXSBcdTRGRUVcdTY1MzlcdTYzQTVcdTUzRTNcdTRFRTVcdTUzMzlcdTkxNEQgbWFpbi50cyBcdTRFMkRcdTc2ODRcdTdFRDNcdTY3ODQgKHNldHRpbmdzIFx1NTcyOCBkYXRhIFx1OTFDQ1x1OTc2MilcbiAgICBkYXRhOiB7IHNldHRpbmdzOiBhbnkgfTsgXG4gICAgb3JjaGVzdHJhdG9yOiB7XG4gICAgICAgIGFkZFRvUXVldWU6IChxdWV1ZU5hbWU6IHN0cmluZywgaXRlbTogYW55KSA9PiBQcm9taXNlPHZvaWQ+O1xuICAgIH07XG59XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBCYXNlQWdlbnQ8VD4ge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcm90ZWN0ZWQgcGx1Z2luOiBJUGx1Z2luQ29udGV4dCwgLy8gXHU2Q0U4XHU1MTY1XHU2M0QyXHU0RUY2XHU0RTBBXHU0RTBCXHU2NTg3XG4gICAgICAgIHByb3RlY3RlZCBsbG06IExMTVByb3ZpZGVyXG4gICAgKSB7fVxuXG4gICAgLy8gXHU4M0I3XHU1M0Q2XHU4QkJFXHU3RjZFXHU3Njg0XHU1RkVCXHU2Mzc3XHU2NUI5XHU1RjBGXG4gICAgLy8gW0ZJWF0gXHU1MTczXHU5NTJFXHU0RkVFXHU2NTM5XHVGRjFBXHU0RUNFIHRoaXMucGx1Z2luLmRhdGEuc2V0dGluZ3MgXHU4M0I3XHU1M0Q2XG4gICAgZ2V0IHNldHRpbmdzKCkgeyByZXR1cm4gdGhpcy5wbHVnaW4uZGF0YS5zZXR0aW5nczsgfVxuICAgIFxuICAgIC8vIFx1ODNCN1x1NTNENiBBcHAgXHU3Njg0XHU1RkVCXHU2Mzc3XHU2NUI5XHU1RjBGXG4gICAgZ2V0IGFwcCgpIHsgcmV0dXJuIHRoaXMucGx1Z2luLmFwcDsgfVxuXG4gICAgLyoqXG4gICAgICogW1x1NUZDNVx1OTg3Qlx1NUI5RVx1NzNCMF0gXHU1QjlBXHU0RTQ5XHU4RkQ5XHU0RTJBIEFnZW50IFx1NzZEMVx1NTQyQ1x1NzY4NFx1OTYxRlx1NTIxN1x1NTQwRFx1NzlGMFxuICAgICAqL1xuICAgIGFic3RyYWN0IGdldCBxdWV1ZU5hbWUoKTogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogW1x1NUZDNVx1OTg3Qlx1NUI5RVx1NzNCMF0gXHU1OTA0XHU3NDA2XHU1MzU1XHU0RTJBXHU0RUZCXHU1MkExXHU3Njg0XHU5MDNCXHU4RjkxXG4gICAgICogQHJldHVybnMgdHJ1ZTogXHU0RUZCXHU1MkExXHU1QjhDXHU2MjEwXHVGRjA4XHU3OUZCXHU1MUZBXHU5NjFGXHU1MjE3XHVGRjA5OyBmYWxzZTogXHU0RUZCXHU1MkExXHU4REYzXHU4RkM3XHU2MjE2XHU1OTMxXHU4RDI1XHVGRjA4XHU0RkREXHU3NTU5XHU1NzI4XHU5NjFGXHU1MjE3XHVGRjA5XG4gICAgICovXG4gICAgYWJzdHJhY3QgcHJvY2VzcyhpdGVtOiBUKTogUHJvbWlzZTxib29sZWFuPjtcbn0iLCAiLy8gc3JjL2FnZW50cy9HZW5lcmF0b3JBZ2VudC50c1xuaW1wb3J0IHsgQmFzZUFnZW50IH0gZnJvbSBcIi4uL2NvcmUvQmFzZUFnZW50XCI7XG5pbXBvcnQgeyBub3JtYWxpemVQYXRoIH0gZnJvbSBcIm9ic2lkaWFuXCI7IC8vIFx1NUYxNVx1NTE2NVx1OEZEOVx1NEUyQVx1NURFNVx1NTE3N1x1NTFGRFx1NjU3MFxuXG4vLyAuLi4gKEdlblRhc2sgXHU2M0E1XHU1M0UzXHU0RkREXHU2MzAxXHU0RTBEXHU1M0Q4KVxuXG5leHBvcnQgY2xhc3MgR2VuZXJhdG9yQWdlbnQgZXh0ZW5kcyBCYXNlQWdlbnQ8R2VuVGFzaz4ge1xuICAgIGdldCBxdWV1ZU5hbWUoKSB7XG4gICAgICAgIHJldHVybiBcImdlbmVyYXRpb25fcXVldWVcIjtcbiAgICB9XG5cbiAgICBhc3luYyBwcm9jZXNzKHRhc2s6IEdlblRhc2spOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICAgICAgY29uc29sZS5sb2coYFtHZW5lcmF0b3JdIFByb2Nlc3Npbmc6ICR7dGFzay5jb25jZXB0fWApO1xuXG4gICAgICAgIC8vIEEuIFx1ODNCN1x1NTNENiBQcm9tcHRcbiAgICAgICAgY29uc3QgcHJvbXB0ID0gdGhpcy5zZXR0aW5ncy5wcm9tcHRfZ2VuZXJhdG9yLnJlcGxhY2UoXCJ7Y29uY2VwdH1cIiwgdGFzay5jb25jZXB0KTtcblxuICAgICAgICAvLyBCLiBcdThDMDNcdTc1MjggTExNXG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmxsbS5jaGF0KHByb21wdCk7XG5cbiAgICAgICAgLy8gQy4gXHUzMDEwXHU2NUIwXHU1ODlFXHUzMDExXHU0RkREXHU1QjU4XHU0RTNBXHU2NTg3XHU0RUY2XHVGRjAxXG4gICAgICAgIGlmIChjb250ZW50KSB7XG4gICAgICAgICAgICAvLyAxLiBcdTYyRkNcdTYzQTVcdTY1ODdcdTRFRjZcdThERUZcdTVGODRcdUZGMUEgXHU3N0U1XHU4QkM2XHU1NkZFXHU4QzMxXHU2NTg3XHU0RUY2XHU1OTM5L1x1Njk4Mlx1NUZGNVx1NTQwRC5tZFxuICAgICAgICAgICAgY29uc3QgZmlsZU5hbWUgPSBgJHt0YXNrLmNvbmNlcHR9Lm1kYDtcbiAgICAgICAgICAgIGNvbnN0IGZvbGRlclBhdGggPSB0aGlzLnNldHRpbmdzLm91dHB1dF9kaXI7IC8vIFx1NTcyOFx1OEJCRVx1N0Y2RVx1OTFDQ1x1OTE0RFx1NzY4NFx1OTBBM1x1NEUyQVx1NzZFRVx1NUY1NVxuICAgICAgICAgICAgY29uc3QgZmlsZVBhdGggPSBub3JtYWxpemVQYXRoKGAke2ZvbGRlclBhdGh9LyR7ZmlsZU5hbWV9YCk7XG5cbiAgICAgICAgICAgIC8vIDIuIFx1NjhDMFx1NjdFNVx1NjU4N1x1NEVGNlx1NjYyRlx1NTQyNlx1NURGMlx1NUI1OFx1NTcyOFxuICAgICAgICAgICAgY29uc3QgZmlsZUV4aXN0cyA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlUGF0aCk7XG5cbiAgICAgICAgICAgIGlmIChmaWxlRXhpc3RzKSB7XG4gICAgICAgICAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU1QjU4XHU1NzI4XHVGRjBDXHU2MjExXHU0RUVDXHU1M0VGXHU0RUU1XHU5MDA5XHU2MkU5XHU4OTg2XHU3NkQ2XHVGRjBDXHU2MjE2XHU4MDA1XHU4REYzXHU4RkM3XHUzMDAyXHU4RkQ5XHU5MUNDXHU2RjE0XHU3OTNBXHUyMDFDXHU0RkVFXHU2NTM5XHUyMDFEXG4gICAgICAgICAgICAgICAgLy8gYXdhaXQgdGhpcy5hcHAudmF1bHQubW9kaWZ5KGZpbGVFeGlzdHMgYXMgVEZpbGUsIGNvbnRlbnQpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTY1ODdcdTRFRjZcdTVERjJcdTVCNThcdTU3MjhcdUZGMENcdThERjNcdThGQzdcdTc1MUZcdTYyMTA6ICR7ZmlsZVBhdGh9YCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIDMuIFx1NTIxQlx1NUVGQVx1NjVCMFx1NjU4N1x1NEVGNlxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShmaWxlUGF0aCwgY29udGVudCk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NURGMlx1NTIxQlx1NUVGQVx1NjU4N1x1NEVGNjogJHtmaWxlUGF0aH1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnNvbGUubG9nKGBbR2VuZXJhdG9yXSBHZW5lcmF0ZWQgY29udGVudCBmb3IgJHt0YXNrLmNvbmNlcHR9YCk7XG4gICAgICAgIHJldHVybiB0cnVlOyBcbiAgICB9XG59IiwgImltcG9ydCB7IEFwcCwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZyB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IEFnZW50S2l0UGx1Z2luIGZyb20gXCIuL21haW5cIjtcblxuZXhwb3J0IGNsYXNzIE9BS1NldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcbiAgICBwbHVnaW46IEFnZW50S2l0UGx1Z2luO1xuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IEFnZW50S2l0UGx1Z2luKSB7XG4gICAgICAgIHN1cGVyKGFwcCwgcGx1Z2luKTtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgfVxuICAgIGRpc3BsYXkoKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRhaW5lckVsLmVtcHR5KCk7XG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiaDJcIiwgeyB0ZXh0OiBcIk9BSyBBZ2VudCBLaXQgXHU4QkJFXHU3RjZFXCIgfSk7XG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiQUkgXHU2QTIxXHU1NzhCXHU2M0QwXHU0RjlCXHU1NTQ2XCIpLmFkZERyb3Bkb3duKGQgPT4gZC5hZGRPcHRpb24oXCJvcGVuYWlcIiwgXCJPcGVuQUlcIikuYWRkT3B0aW9uKFwiZ29vZ2xlXCIsIFwiR29vZ2xlXCIpLnNldFZhbHVlKHRoaXMucGx1Z2luLmRhdGEuc2V0dGluZ3MubGxtUHJvdmlkZXIpLm9uQ2hhbmdlKGFzeW5jIHYgPT4geyB0aGlzLnBsdWdpbi5kYXRhLnNldHRpbmdzLmxsbVByb3ZpZGVyID0gdjsgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZURhdGEoKTsgdGhpcy5kaXNwbGF5KCk7IH0pKTtcbiAgICAgICAgaWYgKHRoaXMucGx1Z2luLmRhdGEuc2V0dGluZ3MubGxtUHJvdmlkZXIgPT09IFwib3BlbmFpXCIpIHtcbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiQVBJIEtleVwiKS5hZGRUZXh0KHQgPT4gdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5kYXRhLnNldHRpbmdzLm9wZW5haUFwaUtleSkub25DaGFuZ2UoYXN5bmMgdiA9PiB7IHRoaXMucGx1Z2luLmRhdGEuc2V0dGluZ3Mub3BlbmFpQXBpS2V5ID0gdjsgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZURhdGEoKTsgfSkpO1xuICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJCYXNlIFVSTFwiKS5hZGRUZXh0KHQgPT4gdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5kYXRhLnNldHRpbmdzLm9wZW5haUJhc2VVcmwpLm9uQ2hhbmdlKGFzeW5jIHYgPT4geyB0aGlzLnBsdWdpbi5kYXRhLnNldHRpbmdzLm9wZW5haUJhc2VVcmwgPSB2OyBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlRGF0YSgpOyB9KSk7XG4gICAgICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIlx1NkEyMVx1NTc4Qlx1NTQwRFx1NzlGMFwiKS5hZGRUZXh0KHQgPT4gdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5kYXRhLnNldHRpbmdzLm9wZW5haU1vZGVsKS5vbkNoYW5nZShhc3luYyB2ID0+IHsgdGhpcy5wbHVnaW4uZGF0YS5zZXR0aW5ncy5vcGVuYWlNb2RlbCA9IHY7IGF3YWl0IHRoaXMucGx1Z2luLnNhdmVEYXRhKCk7IH0pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5wbHVnaW4uZGF0YS5zZXR0aW5ncy5sbG1Qcm92aWRlciA9PT0gXCJnb29nbGVcIikge1xuICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJBUEkgS2V5XCIpLmFkZFRleHQodCA9PiB0LnNldFZhbHVlKHRoaXMucGx1Z2luLmRhdGEuc2V0dGluZ3MuZ29vZ2xlQXBpS2V5KS5vbkNoYW5nZShhc3luYyB2ID0+IHsgdGhpcy5wbHVnaW4uZGF0YS5zZXR0aW5ncy5nb29nbGVBcGlLZXkgPSB2OyBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlRGF0YSgpOyB9KSk7XG4gICAgICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIlx1NkEyMVx1NTc4Qlx1NTQwRFx1NzlGMFwiKS5hZGRUZXh0KHQgPT4gdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5kYXRhLnNldHRpbmdzLmdvb2dsZU1vZGVsKS5vbkNoYW5nZShhc3luYyB2ID0+IHsgdGhpcy5wbHVnaW4uZGF0YS5zZXR0aW5ncy5nb29nbGVNb2RlbCA9IHY7IGF3YWl0IHRoaXMucGx1Z2luLnNhdmVEYXRhKCk7IH0pKTtcbiAgICAgICAgfVxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIlx1OEY5M1x1NTFGQVx1NjU4N1x1NEVGNlx1NTkzOVwiKS5hZGRUZXh0KHQgPT4gdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5kYXRhLnNldHRpbmdzLm91dHB1dF9kaXIpLm9uQ2hhbmdlKGFzeW5jIHYgPT4geyB0aGlzLnBsdWdpbi5kYXRhLnNldHRpbmdzLm91dHB1dF9kaXIgPSB2OyBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlRGF0YSgpOyB9KSk7XG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiXHU3NTFGXHU2MjEwIFByb21wdCBcdTZBMjFcdTY3N0ZcIikuYWRkVGV4dEFyZWEodCA9PiB7IHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uZGF0YS5zZXR0aW5ncy5wcm9tcHRfZ2VuZXJhdG9yKS5vbkNoYW5nZShhc3luYyB2ID0+IHsgdGhpcy5wbHVnaW4uZGF0YS5zZXR0aW5ncy5wcm9tcHRfZ2VuZXJhdG9yID0gdjsgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZURhdGEoKTsgfSk7IHQuaW5wdXRFbC5yb3dzID0gNTsgfSk7XG4gICAgfVxufVxuIiwgImltcG9ydCB7IEFwcCwgTW9kYWwsIFNldHRpbmcgfSBmcm9tIFwib2JzaWRpYW5cIjtcblxuZXhwb3J0IGNsYXNzIElucHV0TW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gICAgcmVzdWx0OiBzdHJpbmc7XG4gICAgb25TdWJtaXQ6IChyZXN1bHQ6IHN0cmluZykgPT4gdm9pZDtcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBvblN1Ym1pdDogKHJlc3VsdDogc3RyaW5nKSA9PiB2b2lkKSB7XG4gICAgICAgIHN1cGVyKGFwcCk7XG4gICAgICAgIHRoaXMub25TdWJtaXQgPSBvblN1Ym1pdDtcbiAgICB9XG5cbiAgICBvbk9wZW4oKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoXCJoMlwiLCB7IHRleHQ6IFwiXHVEODNDXHVERjMxIFx1NjRBRFx1NzlDRFx1NjVCMFx1Njk4Mlx1NUZGNVwiIH0pO1xuXG4gICAgICAgIGxldCBpbnB1dEVsZW1lbnQ6IEhUTUxJbnB1dEVsZW1lbnQ7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJcdThGOTNcdTUxNjVcdTY5ODJcdTVGRjVcdTU0MERcdTc5RjBcIilcbiAgICAgICAgICAgIC5zZXREZXNjKFwiXHU4RjkzXHU1MTY1XHU0RjYwXHU2MEYzXHU3NTFGXHU2MjEwXHU3Njg0XHU3N0U1XHU4QkM2XHU3MEI5XHVGRjBDXHU0RjhCXHU1OTgyXHVGRjFBJ1x1N0IyQ1x1NEUwMFx1NjAyN1x1NTM5Rlx1NzQwNidcIilcbiAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PiB7XG4gICAgICAgICAgICAgICAgaW5wdXRFbGVtZW50ID0gdGV4dC5pbnB1dEVsO1xuICAgICAgICAgICAgICAgIHRleHQub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0ID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlwcmVzc1wiLCAoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZS5rZXkgPT09IFwiRW50ZXJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdWJtaXQoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgICAgICAgLmFkZEJ1dHRvbigoYnRuKSA9PlxuICAgICAgICAgICAgICAgIGJ0blxuICAgICAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dChcIlx1NkRGQlx1NTJBMFx1NTIzMFx1OTYxRlx1NTIxN1wiKVxuICAgICAgICAgICAgICAgICAgICAuc2V0Q3RhKClcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdWJtaXQoKTtcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICBcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiBpbnB1dEVsZW1lbnQ/LmZvY3VzKCksIDApO1xuICAgIH1cblxuICAgIHN1Ym1pdCgpIHtcbiAgICAgICAgaWYgKHRoaXMucmVzdWx0ICYmIHRoaXMucmVzdWx0LnRyaW0oKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICB0aGlzLm9uU3VibWl0KHRoaXMucmVzdWx0LnRyaW0oKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvbkNsb3NlKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XG4gICAgfVxufVxuIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLElBQUFBLG1CQUErQjs7O0FDQS9CLHNCQUErQjtBQUl4QixJQUFNLGVBQU4sTUFBbUI7QUFBQSxFQU10QixZQUFZLFFBQWE7QUFMekIsU0FBUSxZQUFZO0FBQ3BCLFNBQVEsU0FBMkIsQ0FBQztBQUtoQyxTQUFLLFNBQVM7QUFBQSxFQUNsQjtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0EsY0FBYyxPQUF1QjtBQUNqQyxTQUFLLE9BQU8sS0FBSyxLQUFLO0FBQ3RCLFFBQUksQ0FBQyxLQUFLLE9BQU8sS0FBSyxPQUFPLE1BQU0sU0FBUyxHQUFHO0FBQzNDLFdBQUssT0FBTyxLQUFLLE9BQU8sTUFBTSxTQUFTLElBQUksQ0FBQztBQUFBLElBQ2hEO0FBQ0EsWUFBUSxJQUFJLHdEQUErQixNQUFNLFlBQVksNkRBQXFCLE1BQU0sV0FBVztBQUFBLEVBQ3ZHO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxNQUFNLFdBQVcsV0FBbUIsTUFBVztBQUMzQyxRQUFJLENBQUMsS0FBSyxPQUFPLEtBQUssT0FB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UztBQUNYLFVBQU0sS0FBSyxTQUFTO0FBR3BCLFFBQUksQ0FBQyxNQUFNLEtBQUssSUFBSSxNQUFNLFFBQVEsT0FBTyxLQUFLLEtBQUssU0FBUyxVQUFVLEdBQUc7QUFDckUsWUFBTSxLQUFLLElBQUksTUFBTSxhQUFhLEtBQUssS0FBSyxTQUFTLFVBQVU7QUFBQSxJQUNuRTtBQUVBLFNBQUssY0FBYyxJQUFJLGNBQWMsS0FBSyxLQUFLLElBQUksQ0FBQztBQUVwRCxTQUFLLE1BQU0sSUFBSSxZQUFZLEtBQUssS0FBSyxRQUFRO0FBQzdDLFNBQUssZUFBZSxJQUFJLGFBQWEsSUFBSTtBQUV6QyxTQUFLLGFBQWEsY0FBYyxJQUFJLGVBQWUsTUFBYSxLQUFLLEdBQUcsQ0FBQztBQUd6RSxTQUFLLFdBQVc7QUFBQSxNQUNaLElBQUk7QUFBQSxNQUNKLE1BQU07QUFBQSxNQUNOLFVBQVUsTUFBTTtBQUNaLFlBQUksV0FBVyxLQUFLLEtBQUssQ0FBQyxZQUFZO0FBQ2xDLGVBQUssYUFBYSxXQUFXLG9CQUFvQixFQUFFLFFBQWlCLENBQUM7QUFDckUsY0FBSSx3QkFBTyxpQkFBTyx5RkFBd0I7QUFBQSxRQUM5QyxDQUFDLEVBQUUsS0FBSztBQUFBLE1BQ1o7QUFBQSxJQUNKLENBQUM7QUFHRCxTQUFLLFdBQVc7QUFBQSxNQUNaLElBQUk7QUFBQSxNQUNKLE1BQU07QUFBQSxNQUNOLFVBQVUsTUFBTTtBQUNiLGFBQUssYUFBYSxNQUFNO0FBQUEsTUFDM0I7QUFBQSxJQUNKLENBQUM7QUFHRCxTQUFLLGNBQWMsT0FBTyxpQkFBaUIsTUFBTTtBQUM3QyxVQUFJLFdBQVcsS0FBSyxLQUFLLENBQUMsWUFBWTtBQUNsQyxhQUFLLGFBQWEsV0FBVyxvQkFBb0IsRUFBRSxRQUFpQixDQUFDO0FBQ3JFLGFBQUssYUFBYSxNQUFNO0FBQUEsTUFDNUIsQ0FBQyxFQUFFLEtBQUs7QUFBQSxJQUNaLENBQUM7QUFBQSxFQUNMO0FBQUEsRUFFQSxNQUFNLFdBQVc7QUFDYixVQUFNLFNBQVMsTUFBTSxNQUFNLFNBQVM7QUFDcEMsU0FBSyxPQUFPLE9BQU8sT0FBTyxDQUFDLEdBQUcsY0FBYyxNQUFNO0FBQ2xELFNBQUssS0FBSyxXQUFXLE9BQU8sT0FBTyxDQUFDLEdBQUcsYUFBYSxVQUFVLGlDQUFRLFFBQVE7QUFBQSxFQUNsRjtBQUFBLEVBRUEsTUFBTSxXQUFXO0FBQ2IsVUFBTSxNQUFNLFNBQVMsS0FBSyxJQUFJO0FBQzlCLFFBQUksS0FBSyxLQUFLO0FBQ1YsV0FBSyxNQUFNLElBQUksWUFBWSxLQUFLLEtBQUssUUFBUTtBQUFBLElBQ2pEO0FBQUEsRUFDSjtBQUNKOyIsCiAgIm5hbWVzIjogWyJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIl0KfQo=
